<div class="control-group">
  <h3 class="control-group__title">SPL Monitor</h3>
  <div class="control-group__display spl">
    <div class="spl__current">
      <div class="spl__current__value">
        <span class="spl__current__value--number">{{
          splMeter.level() | number : "1.1-1"
        }}</span>
        <span class="spl__current__value--unit">dB(A)</span>
      </div>

      <div class="spl__current__bar">
        <div
          class="spl__current__bar--fill"
          [style.width.%]="splBarWidth()"
        ></div>
      </div>
      <div class="spl__current__bar--range">
        <span>20</span>
        <button
          class="calibrate-btn-small"
          (click)="splMeter.Calibrate()"
        >
          Calibrate
        </button>
        <span>140</span>
      </div>
    </div>

    <div class="spl__max">
      <div class="spl__max__display">
        <div class="spl__max__value">
          <span class="spl__max__value--label">Max SPL</span>
          <span class="spl__max__value--number">{{
            splMeter.maxLevel() | number : "1.1-1"
          }}</span>
          <span class="spl__max__value--unit">dB</span>
        </div>

        <button class="reset-max-btn" (click)="splMeter.ResetMaxLevel()">
          Reset
        </button>
      </div>
    </div>

    <div class="spl__config">
      <div class="spl__config__row">
        Max Hold Time
        <div class="spl__config__row">
          <button
            class="infinite-hold-btn"
            (click)="splMeter.toggleInfiniteMaxHold()"
            [class.active]="splMeter.infiniteMaxHold()"
          >
            âˆž
          </button>
          <app-editable-value
            [value]="splMeter.maxHoldTime()"
            (valueChange)="splMeter.setMaxHoldTime($event)"
            [mode]="'time'"
            [min]="1"
            [max]="100"
            [step]="0.1"
            [decimals]="1"
            unit="s"
          ></app-editable-value>
        </div>
      </div>
      <div class="spl__config__row">
        Time Weighting

        <app-editable-value
          [value]="splMeter.timeWeighting()"
          (valueChange)="splMeter.setTimeWeighting($event)"
          [mode]="'time'"
          [min]="0.1"
          [max]="10"
          [step]="0.1"
          [decimals]="1"
          unit="ms"
        ></app-editable-value>
      </div>
    </div>
  </div>
</div>
